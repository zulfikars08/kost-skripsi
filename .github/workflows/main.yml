name: Deploy to Hostinger

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    # Tambahkan langkah-langkah lain untuk build/test jika diperlukan

    - name: Deploy to Hostinger
      run: |
        rsync -e "ssh -p ${{ secrets.PORT }} -i /home/runner/.ssh/deploy_key -o StrictHostKeyChecking=no" \
        -avzrv --delete /home/runner/work/***/***/./ ${{ secrets.USERNAME }}@${{ secrets.IP }}:/home/u410590140/kost-skripsi
      env:
        SSH_PRIVATE_KEY: ${{ secrets.KEY }}
        REMOTE_HOST: ${{ secrets.IP }}
        REMOTE_USER: ${{ secrets.USERNAME }}
        REMOTE_PORT: ${{ secrets.PORT }}
        SOURCE: "./"
        TARGET: "/home/u410590140/kost-skripsi"
        ARGS: "-avzr --delete"
